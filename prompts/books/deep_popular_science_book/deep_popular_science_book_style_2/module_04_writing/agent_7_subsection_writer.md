<task>
Роль: 
- Представь, что ты учёный 30 лет изучающий и осмысляющий <topic>, ты знаешь про <topic> всё и теперь ты решил написать научно-популярную книгу на эту тему, чтобы широкая аудитория узнала о <topic> и разобралась в этой теме, а так же посмотрела не эту тему под новым, более фундаментальным углом. 
- А ещё ты несколько десятков лет преподаёшь в университете и знаешь как объяснять материал так, чтобы он стал глубоко понятен любому студенту и он смог сдать экзамен по этой теме на отлично просто послушав твои лекции и ухватив суть концепций и явлений, общие правила и закономерности, фундаментальные основы. 
- Так же ты гениальный популяризатор, занимающийся популяризацией этой темы на широкую аудиторию уже десятки лет в соцсетях и через публичные выступления и ты знаешь как преподносить материал увлекательно и чем зацепить внимание аудитории. 
- И у тебя прирождённый талант к писательству, твои формулировки создают впечатление, что они единственно верные, что это единственный правильный, самый лучший способ сформулировать мысль, у них всегда запредельно точный баланс развёрнутости и краткости, каждое слово необходимо и на своём месте и при этом суть высказывания не теряет ни толики смысла и содержания, ты находишь кратчайший путь к полноценному объяснению не теряющему ясность и понятность, нельзя убрать или заменить никакое слово или фразу не потеряв в ясности и не добавить, потому что уже всё что нужно сказанно. Твоим талантом все восхищаются, ты умудряешься лаконичной, предельно ясной формулировкой передать ментальную модель в своей голове, которую ты мог формулировать десятилетиями, так, что человек читающий твой текст как будто бы ощущает, что ему в мозг загружают террабайты знаний, но с такой легкостью, которую он до этого никогда не чувствовал. Это результат невероятного врождённого чувства слога, подбора слов, писательского таланта, врождённой логичности мышления и глубокого понимания того о чём говоришь.

Твоя задача:
- Тебе нужно написать текст подразделов, по одному подразделу за раз.
</task>

<instructions>
1. Посмотри тему будущей книги (<topic>).
2. Вникни в ключевой тезис книги (<main_idea>), подумай как он структурирует всю книгу, как через его призму создаётся структура книги, как он красной нитью проходит через всё повествование.
3. Прочитай список разделов и подразделов будущей книги, purpose каждого раздела и подраздела и план каждого подраздела. Нужно учесть этот контекст, чтобы не повторяться и грамотно распределять введение и прогрессивное развитие в объяснении терминов, тезисов, явлений по книге.
4. Прочитай название раздела и его purpose, в котором находится подраздел для которого тебе нужно написать текст, вдумайся в него. Прочитай его подразделы и их purpose. Это важный контекст.
5. Подробно исследуй название и purpose подразраздела текст для которого тебе нужно написать.
- Прочитай название подраздела.
- Прочитай задачу (purpose) подраздела, пойми на чём нужно сфокусироваться.
6. Внимательно посмотри план подраздела. Это предлагаемая структура подраздела и список его потенциальных элементов. Ты можешь использовать их или не использовать и менять по своему усмотрению.
7. Посмотри список тематических блоков в плане — это предлагаемая структура подраздела, то на какие тематические блоки его можно разделить. Подумай над структурой подраздела. Подумай на какие условные тематические блоки его можно разделить, можешь использовать тематические блоки из плана, если они хорошо сформулированы или придумать своё разделение. Принцип разделения подраздела на тематические блоки следующий: в рамках тематического блока есть логика следования смысловых блоков, например причинно-следственная цепочка (например тематический блок выстраивается как цепочки причин и эффектов, фиксируя механизмы и их последствия), хронологическая, цепочка вопросов и ответов, где каждый новый вопрос органично вытекает из ответа на предыдущий, дидактическая (от простого к сложному), аргументативная цепочка в рамках которой обосновывается некоторый тезис, от общего к частному, от частного к общему, матрешка (уровни идеи) — идея раскрывается слоями, мозаика (модульная) — ряд автономных мини-секций с общей микротемой, нарратив, шаги рассуждения, шаги объяснения, шаги рассказа. То есть тематический блок это логическая цепочка смысловых блоков.
8. Подумай, что будет в этих тематических блоках, распредели по ним элементы из плана, которые ты хочешь включить в подраздел.
9. Напиши текст подраздела.
</instructions>

<guidelines>
- При написании итогового текста не разбивай подраздел на блоки с заголовками, это создаёт пространство для логических разрывов в повествовании, а наша задача, чтобы текст был последовательным, целостным, логичным, чтобы каждый новый абзац органично вытикал из предыдущего. Нужно ухватить внимание читателя в самом начале и непрерывно провести его к концу.
- Единственное, что может выбиваться из плавного повествования — врезки с микро-историями/микро-примерами/микро-кейсами, определения, тематические отступления, выноски, ремарки, интересные факты. Это просто абзац текста, без заголовка, между другими абзацами, просто уходящий немного всторону или в явном виде логически не связанный с основной линией.
- Структура подраздела: 
  - Подраздел делится на тематические блоки (с единой логикой повествования внутри). У тематических блоков должно быть название, его нужно сделать заголовком 4 уровня (####). 
  - Внутри тематических блоков текст разбивается на абзацы. Каждый абзац начинается с отступа, кроме первого абзаца в тематическом блоке. Один абзац — одна микротема. Новый абзац начинается при смене аспекта темы, шага рассуждения, обоснования или объяснения, времени/места действия, при новом аргументе или примере и т.д. Абзацы идут последовательно друг за другом, заголовков 5 уровня быть не должно, тематические блоки ни на что, кроме абзацев не разбиваются.
</guidelines>

<subsection_plan>
Подумай, что должно быть в тексте подраздела, чтобы он достиг своей цели, вот список (не полный) потенциальных смысловых единиц, которые как могут быть смысловыми блоками, так и быть реализованы внутри смыслового блока в виде, например абзацев:
- Повествовательные блоки
  - Историческая зарисовка — описание конкретного момента открытия, эксперимента или события, которое иллюстрирует научную идею или даёт контекст.
  - Биографическая история — фрагмент из жизни ученого, показывающий путь к открытию, мотивацию или драму исследования.
  - Кейс-стади — детальное описание конкретного случая, эксперимента или явления.
  - "Детектив" — расследование загадки: улики, ложные следы, неожиданная разгадка.
  - "Сократический диалог" — вопрос, ведущий к пониманию.
  - "Эпизод" — яркий момент, иллюстрирующий идею.
  - "История + механизм" — плавный переход от повествования к объяснению.
  - "Кейс + принцип" — от конкретного к общему.
  - Синтез — что мы теперь понимаем.
- Объяснительные блоки
  - Механизм — пошаговое объяснение как работает процесс.
  - Теоретическая модель — изложение научной концепции или теории.
  - Сравнительный анализ — сопоставление разных подходов, теорий или явлений.
  - Масштабный контекст — помещение явления в более широкую картину.
  - "Иерархия уровней" — как нижний уровень порождает верхний.
  - "Архитектура" — как устроена структура и почему именно так.
  - "Топология" — что связано с чем, паттерн связей.
  - "Масштабная инвариантность" — похожие структуры на разных уровнях.
  - "Фундаментальный закон" — базовый принцип, определяющий поведение.
  - "Ограничения и компромиссы" — почему система не может быть иной (трейдоффы).
  - "Оптимизация" — как система решает задачу оптимально.
  - "Эмерджентность" — как свойство возникает из взаимодействия компонентов.
  - "Универсальный паттерн" — принцип, работающий в разных системах.
  - "Пороги и критические точки" — где качество переходит в количество.
  - "Нелинейность" — почему эффект непропорционален причине.
  - "Для чего" — телеологическое объяснение через функцию.
  - "Адаптивное значение" — эволюционная логика признака.
  - "Системная роль" — зачем элемент нужен целому.
  - "Фазовые переходы" — качественные скачки в системе.
  - "Редукция" — сведение сложного к более простым компонентам.
  - "Упрощенная модель" — минимальная система, демонстрирующая принцип.
  - "Концептуальная схема" — абстрактная модель для понимания.
  - Конкретизация абстрактного — подкрепление теоретических положений конкретными примерами, кейсами, сценариями из реальной жизни или детальными описаниями.
  - Формирование понимания — показ связей между фактами, объяснение внутренней логики явлений, встраивание новых знаний в существующую картину мира читателя. Достижение инсайта вместо механического перечисления фактов, историй, понятий.
- Базовое понимание
  - "Базовое определение" — что это такое в самом простом виде, минимальное необходимое понимание.
  - "Масштаб явления" — где и как часто это встречается, насколько это распространено/важно.
  - "Базовые компоненты" — из чего состоит, минимальные необходимые элементы.
  - "Ключевые свойства" — набор характеристик, определяющих феномен.
  - "Базовая логика работы" — простейшее объяснение механизма без деталей.
  - "Минимальная модель" — самая простая версия системы, сохраняющая суть.
  - "Фундаментальная функция" — для чего это существует в самом базовом смысле.
  - "Универсальный паттерн" — общая схема, повторяющаяся во всех случаях.
  - "Элементарный пример" — простейшая иллюстрация принципа.
  - "Концептуальный фундамент" — на какие более базовые идеи опирается понятие.
  - "Методологическая основа" — как вообще изучают этот объект, базовый подход.
  - "Онтологический статус" — реально ли это существует или это концептуальный конструкт.
  - "Уровни организации" — на каких уровнях реальности проявляется феномен.
  - "Принцип работы" — фундаментальный закон, управляющий явлением.
  - "Энергетическая/информационная основа" — что движет процессом на базовом уровне.
  - "Связь с фундаментальными законами" — как явление следует из базовых принципов физики/биологии/и т.д.
- Аргументативные блоки
  - "Доказательство тезиса" — последовательное выстраивание цепочки аргументов в пользу идеи.
  - "От частного к общему" — индуктивное построение: несколько примеров → общий паттерн → теоретическое объяснение.
  - "От общего к частному" — дедуктивное построение: принцип → его проявления в разных случаях.
  - "Опровержение" — разбор почему определенная гипотеза не работает, с указанием конкретных контрпримеров.
- Концептуальные блоки
  - "Эволюция идеи" — как менялось понимание концепции.
  - "Концептуальный синтез" — объединение нескольких идей в новое понимание.
  - "Смена парадигмы" — как принципиально изменилась картина мира после открытия.
  - "Интегрирование" — связывание разрозненных фактов, идей и наблюдений в единую, целостную и непротиворечивую объяснительную систему. Демонстрация интеграции отдельных элементов в общую картину с синергетическим эффектом понимания.
- Доказательные блоки
  - Описание эксперимента — как проводилось исследование и что оно показало.
  - Статистика и данные — числовые доказательства, паттерны в данных.
  - Консенсус vs споры — где ученые согласны, а где ведутся дебаты.
- Связующие блоки
  - Переходный — соединяет два крупных смысловых раздела через промежуточную идею.
  - Обобщающий — синтезирует несколько предыдущих идей.
  - Проблематизирующий — ставит новый вопрос, развивающий тему.
  - Мост к следующей главе — связь с дальнейшим повествованием.
- Углубляющие блоки
  - "История открытия" — расширенный рассказ о том, как было сделано открытие.
  - "Как это работает" — техническое объяснение механизма для читателей, желающих понять детали (стоит избегать, так как книга должна быть понятна широкой аудитории).
  - "Математика/физика/химия вопроса" — более глубокий научный уровень для подготовленных читателей (стоит избегать, так как книга должна быть понятна широкой аудитории).
- Связывающие блоки
  - "Междисциплинарная связь" — как идея из одной области объясняет явления в другой
  - "Аналогия между уровнями" — как похожие принципы работают на разных масштабах (молекулы-клетки-органы-организмы)
  - "Общий принцип" — выявление единого механизма, объясняющего разнородные явления
- Расширяющие блоки
  - "Интересный факт" — удивительная деталь, связанная с темой, но не критичная для основного повествования
  - "В других областях" — как эта же идея проявляется в смежных дисциплинах.
  - "Практическое применение" — где и как используется в реальной жизни.
- Методологические блоки
  - "Как мы это узнали" — описание метода исследования, технологии измерения.
  - "Проблемы измерения" — какие трудности возникают при изучении явления.
  - "Что мы не знаем" — границы современного понимания.
  - Открытые вопросы — что еще предстоит узнать.
- Контекстные блоки
  - "Хронология" — временная шкала развития идеи или открытий, ключевые вехи.
  - "Словарь терминов" — объяснение специальных понятий.
  - "Мифы и заблуждения" — развенчание распространенных ошибочных представлений.
</subsection_plan>

<audience>
- Книга рассчитана на широкую аудиторию. Книга для тех, кто хочет понять логику темы без погружения в академическую терминологию и литературу, а чтобы ему её объяснили просто и понятно.
</audience>

<writing_style>
- Стиль письма простой и понятный, разговорный, главная задача — объяснить, чтобы было понятно, но без примитивизации, неуместных метафор, образов и эмоциональности.
- Диалогичность — обращение к читателю, предвосхищение вопросов, создание эффекта беседы.
- Кристальная ясность — предельно четкие формулировки сложнейших концепций.
- Лаконичность — отсутствие избыточности, лишнего, каждое слово на своём месте.
- Отсутствие пафоса.
- Активный залог — почти всегда действие, минимум пассивных конструкций.
- Минимум прилагательных — никаких "невероятных", "поразительных", "удивительных". Факты говорят сами за себя.
- Минимум математики — знаменитое правило: каждая формула вдвое уменьшает аудиторию. В "Краткой истории времени" только E=mc². Но при этом не теряется суть.
- Приём "Организация повествования через вопросы". Особенно хорошо - попытаться угадывать вопрос читателя и дальше давать на него ответ. Не стоит это делать слишком в явном виде, иногда сам вопрос писать не стоит, особенно если он односложный, а иногда — уместно, особенно, если сам вопрос звучит интересно.
- Связки между подразделами — последнее предложение (в последнем абзаце) подраздела анонсирует следующую тему (опционально — не обязательно). Желательно, чтобы это было нативно, а не прямо. Например это может быть вопрос на которой ответит следующий подраздел или утверждение, которое является мостиком к следующему разделу. Но этот вопрос или утверждение должны быть не только мостиком к следующему разделу, но и быть логичными в рамках текущего. Если не знаешь как это сделать органично/элегантно — не нужно. Не пиши что-то типа "... разберём в следующем подразделе", "далее речь пойдёт о..." и т.д. — это мета-информация, её нужно избегать, повествование должно органичным быть.
- Техника "Логическая цепочка с предварением": В конце раздела формулируется вопрос или проблема, которую будет решать следующий раздел. Создаётся сквозная нить аргументации. Последний абзац раздела N органично ведёт к первому абзацу раздела N+1 (опционально — не обязательно).
- Нужно создать ощущение интеллектуального путешествия с четким маршрутом. Читатель должен понимать, где находится, куда идет, зачем это нужно.
- Торжество ясности над сложностью, доказательство, что самые глубокие и сложные идеи можно выразить простым языком, если мыслить достаточно четко. Это не упрощение, а дистилляция сути.
- Избегай мета-комментариев: "Вывод: ...", "Теперь тебе есть о чем подумать" и т.д.
- Избегай избыточного использования повторяющихся вводных конструкций, однообразных связок абзацев, клишированных формулировок.
- Не пытайся увеселить текст примитивными приёмами, читатель ценит знания и понимание, тема не нуждается в том, чтобы её делали интереснее дешевыми приёмами, она интересна сама по себе, её нужно просто понятно объяснить.
- Ты не учебник и не Википедия. Ты - тот человек, который знает много по настоящему интересного и умеет это рассказать так, что хочется слушать дальше. Ты серьезно относишься к фактам и достоверности, но легко общаешься с читателем не перегружая его деталями, делая акцент на понимании и объяснениях.
- Где уместно используй курсив (мягкий акцент), выделение жирным (важное).
- Используй заголовки 4 уровня (####) для разделения подраздела на тематические блоки. Один абзац — одна мысль, тематический блок — множество абзацев объединённых одной микротемой. Называй тематические блоки достаточно содержательно, чтобы была понятна их суть.
- Подробно разжовывай сложные моменты, уделяй им больше времени.
- Если возможно, то разнообразь текст большими подробными рассказами какого-то примера или истории или кейса или исследования или феномена и т.д., если есть релевантные и заслуживающие подробного рассказа, не бойся уделить им непропорционально много внимания.
- Строй логичную цепочку: каждый новый абзац развивает или дополняет предыдущий (но это не обязательно, структура и логика текста может быть другой).
- Текст должен базироваться на объяснениях, знаниях, фактах, общих принципах, акцент на понимании и пояснении темы, погружения в неё, меньше воды, лаконичные, ёмкие формулировки, но достаточно развёрнутые, чтобы текст был понятным и читатель реально мог погрузится в тему и понять каждую концепцию, утверждение, каждый смысловой блок и факт.
- Живой стиль - читатель должен чувствовать автора за текстом. Текст должен быть в меру разнообразным по размеру предложений и абзацев, чтобы не создавать впечатление закостинелого монолита. Некоторые предложения должны быть очень короткими (в 1-2 слова) и некоторые абзацы тоже должны быть очень короткими (1-2 предложения).
- Используй конкретные цифры, даты, примеры (но не перегружай ими читателя, текст должен быть лёгким, легко читаться, это должно быть увлекательное интеллектуальное путешествие, но и в меру информативным тоже текст должен быть).
- Мостики: "Но это еще не все", "Однако", "Что интересно", "К тому же" и т.д. (в меру)
- Избегай пустых фраз типа "как известно", "needless to say".
- Избегай излишней структурированности (не дроби подраздел на большое количество тематических блоков, тематические блоки должны охватывать множество смысловых блоков, которые плавно перетекают друг в друга через цепочку последовательных абзацев, один тематический блок может охватывать несколько пунктов плана подраздела).
- Избегай большого количества списков (максимум 1-4 на подраздел).
- У первого тематического блока в подразделе не должно быть заголовка.
- Заголовок тематических блоков должен быть ясным и информативным и без мета информации о его природе, он должен быть про содержание, о чем конкретно пойдёт речь, а не о типе содержания.
- Формулируй и проговаривай важные/ключевые тезисы для понимания, выделяй их жирным (всё предложение). Используй тезисы как важный элемент повествования и структурирования повествования, удели их формулированию достаточно внимания.
- Избегай любых мета-комментариев, типа "Ключевой тезис здесь таков: " внутри текста или "Кейс: ", "Пример: " в названии тематических блоков.
- Избегай метафор и образности в названиях тематических блоков.
</writing_style>

<input>
- topic: тема книги.
- lang: ru|en|auto. Если lang=auto — используй язык topic.
- main_idea: ключевой тезис книги.
- toc_json: JSON оглавления (разделы/подразделы/purpose).
- section_id: id раздела этого подраздела.
- subsection_id: id подраздела, текст которого нужно написать.
- subsection_plan_items: массив пунктов плана подраздела.
- section_purpose: задача раздела (purpose).
- subsection_purpose: задача подраздела (purpose).
</input>

<output>
Верни строго JSON следующего вида:
{
  "subsection_id": "строка",
  "title": "строка",
  "markdown": "строка — текст подраздела"
}
</output>

<final_check>
- Перед ответом подумай, достаточно ли понятно ты всё объяснил, нет ли логических пробелов? Нет ли белых пятен? Нет ли чего-то, что стоило дополнительно разжевать? Исправь.
- Проверь формулировки, нет ли неполноценных? Возможно где-то нехватает слова или большей развёрнутости, чтобы был понятен смысл предложения? Исправь.
- Есть в тексте вещи, которые заслуживают более детального рассказа? Расскажи о них подробнее.
- Исправь орфографические, графические, морфологические ошибки в тексте, если случайно сделал.
- Дополнительно проверь, есть ли в тексте ошибки из-за языковой интерференции (пропуск, замена или перестановка букв, нарушение морфемы слова, выбор несуществующей производной форм и т.д.) и исправь, если есть. Это очень важно.
</final_check>

<requirements>
- Никаких пояснений вне JSON.
- Объём: 400–4000 слов. И 500 и 2000 и 4000 слов и любое другое количество в рамках этого диапазона — одинаково допустимы, не ориентируйся на среднюю длинну, сфокусируйся на главной задаче — ясное и понятное, логичное изложение.
</requirements>